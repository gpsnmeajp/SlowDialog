# SlowDialog
[デモを利用するにはこちら](https://gpsnmeajp.github.io/SlowDialog)

<img width="610" height="54" alt="image" src="https://github.com/user-attachments/assets/b93e43dd-6380-4b42-a2a6-73d31e0a4ae7" />

AIとの会話の主体を、人間に取り戻すためのチャットアプリケーションです。

AIが一気にまくしたてる、そこに人間が返答すると、またまくしたてる。
そうして、思考が加速した果に、「あれ何がしたかったんだっけ？」となる。
そんな体験はありませんか？

本ソフトウェアでは、AIの返答を一気に表示するのではなく、まるで人間とチャットしているかのように、少しずつゆっくりと届けます。
意図的に待ち時間を追加し、あるいはボタンを押して進めるようにします。

「ん？」と思ったら、AIが話し終わるのを待つこと無く割り込むことができます。
こうすることで、ゲームの台詞を読むような感じで、考える時間が生まれ、会話がより自然なものになります。

<img width="300" src="https://github.com/user-attachments/assets/f746882f-b05f-48d2-bcf0-092c7221625b" />　<img width="300" src="https://github.com/user-attachments/assets/161de563-0cc9-49f1-9260-191eef71854b" />

好きなだけチャチャや合いの手を入れられます。

<img width="300" src="https://github.com/user-attachments/assets/aa103612-261d-40ec-99ae-412a3153b6d0" />　<img width="300" src="https://github.com/user-attachments/assets/6a88728e-6468-410e-abc3-fe19a72137b3" />


本ソフトウェアは、Google Antigravity, Github Copilotでバイブコーディングしたものです。

## 特徴

- **遅延表示** — AIの返答を句読点や改行で区切り、文字数に応じた待ち時間を挟みながら表示します。待ち時間の間はタイピングインジケータが表示されます。
- **割り込み** — AIがまだ話している途中でも、メッセージを送信できます。AIの出力は中断され、表示済みの内容で確定したうえで、続きから会話が始まります。
- **手動進行モード** — 自動進行をオフにすると、「続きを読む」ボタンで自分のペースで読み進められます。
- **ゲームボーイ風デザイン** — ピクセルフォントと4色パレットによる、懐かしくも落ち着いた見た目です。
- **フレームワーク不使用** — HTML、CSS、JavaScriptのみで構成されたシンプルな単一ページアプリケーションです。

## 動作要件

- モダンブラウザ（Chrome, Firefox, Safari, Edge の最新版）
- OpenAI互換の ChatCompletion API（SSEストリーミング対応）のエンドポイントとAPIキー

## 使い方

### 起動

`index.html` をブラウザで開くだけで動作します。ビルドやサーバーの構築は不要です。

OpenAI互換のAPIを提供するサービスをご利用ください。

OpenRouterが推奨ですが、ローカルLLMなどでも動きます。  
OpenRouterの`perplexity/sonar-pro`などを使えば、ネット上の情報を探すのに使えたりもします。

### 初回設定

初回起動時にイントロダイアログが表示されたあと、設定ダイアログが開きます。以下の項目を入力してください。

| 項目 | 説明 | 既定値 |
|------|------|--------|
| Base URL | APIのベースURL | `https://openrouter.ai/api/v1` |
| API Key | APIキー | — |
| モデル名 | 使用するモデルの識別子 | `google/gemini-3-flash-preview` |
| システムプロンプト | AIへの指示 | `あなたは親切なアシスタントです。` |
| フォント | 表示フォント | k8x12S |
| 自動進行 | 自動で進行するか | オン |
| 1文字あたりの待ち時間 | 遅延表示の速度（ミリ秒） | 150 |
| コンテキストサイズ | APIに送る履歴メッセージ数 | 20 |

設定はブラウザの localStorage に保存され、次回以降は自動的に読み込まれます。

<img width="300" src="https://github.com/user-attachments/assets/9e87c32c-bd49-4e83-81c4-8f3a6a7886d6" />

### 割り込みの仕組み

AIの返答がまだ表示途中であっても、テキストを入力して送信できます。その場合、以下のように処理されます。

- AIの出力が中断され、表示済みのテキストが履歴として確定します。(単に非表示になるわけではなく、履歴が加工されます)
- まだ1文も表示されていなかった場合は、前回のユーザーメッセージと新しいメッセージが連結されます。

### 履歴のエクスポート

ツールバーのエクスポートボタンから、会話履歴をJSON形式でダウンロードできます。

## ファイル構成

```
slowdialog/
├── index.html          # エントリポイント
├── style.css           # スタイル定義
├── app.js              # アプリケーションロジック
├── README.md           # 本ファイル
├── DIRECTION.md        # 企画書
├── ARCHITECTURE.md     # 内部設計書
└── fonts/
    ├── k8x12.ttf       # k8x12（ピクセルフォント）
    ├── k8x12L.ttf      # k8x12L（縦長仮名）
    ├── k8x12S.ttf      # k8x12S（8dot非漢字）
    └── misaki_gothic.ttf  # 美咲ゴシック
```

## フォントについて

本アプリケーションには以下のフォントが同梱されています。

- **k8x12 / k8x12L / k8x12S / 美咲ゴシック** — 門真 なむ氏による8×8ドットの日本語フォントです。[Little Limit](https://littlelimit.net/font.htm) で公開されています。

各フォントのライセンスについては、それぞれの配布元をご確認ください。

## ライセンス

フォントファイルを除くソースコードのライセンスは、MIT LICENSEです。


