AIとの会話アプリを作りましょう。
このアプリの目的は、会話の主体を人間に戻すというものです。
AIの速い速度で大量の文を吐き出す特性はそのままに、見せ方の工夫と自動的な履歴加工機能により、会話感を保ちながら快適な会話を楽しむことができます。

# 技術スタック
ブラウザ上で実行する、PC/モバイル両対応のレスポンシブな1ページアプリです。

- HTML5
- VanillaJS

# API
OpenAI互換のChatCompletion APIを使用します。SSEでレスポンスを受け取り、逐次処理を行います。
BaseURL, API Key, モデル名, システムプロンプト, 1文字あたりの待ち時間ミリ秒, コンテキストサイズは初回起動時及び設定ボタンで表示されるポップアップダイアログで設定し、WebStorageに保存されます。

会話履歴もWebStorageに保存されます。
通信失敗は、リトライボタンを表示します。

# 外見
ゲームボーイ風の白黒ドット絵デザインを採用します。
フォントは、美咲フォントを使用します。
効果音はなし。

上部にツールバーを置き、設定ボタンと、履歴エクスポートボタンを置きます。

# ユーザーインタラクション
通常のチャットアプリ風のインターフェースを採用します。
ただし、AIからの返答は内部的に「。」や改行で区切り、次に表示する文字数に応じて待ち時間を発生させます。(空行は区切りとしません)
待ち時間の間、チャットバブルの代わりに、タイピングインジケータを表示します。
これにより、AIからの出力をあたかも人間が打つように見せかけることができます。

# 割り込み(履歴加工機能)
ユーザーは、AIが(仮想的な)タイピングをしている間でも、新たなメッセージを送信することができます。
メッセージが送信されると、AIからの出力は中断され、履歴上もAIの出力は打ち切られます。
仮にAIがまだ生成中であったとしても、その時点で生成した内容は捨てられ、新たに生成が開始されます。

もし、ユーザーがAIが1メッセージも出力する前に、再度メッセージを送信した場合は、内部的には前回のユーザーメッセージと今回の新しいユーザーメッセージを連結して、新たに生成が開始されます。

なお、コンテキストサイズを超過すると、古いメッセージから順に削除していきます。
